$.fn.gmaps=function(e){function a(e,a){a?(s=e,google.maps.event.trigger(e,"click")):(s=o[e],google.maps.event.trigger(o[e],"click"))}function t(e){var a;return e.indexOf("-")>0?(e=e.split("-"),""!=e[1]&&(a=e[1])):a=e,a}e=$.extend({mapa:$(this).get(0),locations:"",z:11,vm:".vermapa",vmcombo:".combo_vermapa",txtver:"Ver en Google Maps",icongm:"",difstl:!1,classtit:"maps-tit",classdir:"maps-dir",classmail:"maps-dir",classphone:"maps-dir",classinfo:"infomap",showOnLoad:!0},e||{});var s,o=[],i=[{featureType:"road.highway",elementType:"geometry",stylers:[{saturation:-100},{lightness:-8},{gamma:1.18}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{saturation:-100},{gamma:1},{lightness:-24}]},{featureType:"poi",elementType:"geometry",stylers:[{saturation:-100}]},{featureType:"administrative",stylers:[{saturation:-100}]},{featureType:"transit",stylers:[{saturation:-100}]},{featureType:"water",elementType:"geometry.fill",stylers:[{saturation:-100}]},{featureType:"road",stylers:[{saturation:-100}]},{featureType:"administrative",stylers:[{saturation:-100}]},{featureType:"landscape",stylers:[{saturation:-100}]},{featureType:"poi",stylers:[{saturation:-100}]},{}];google.maps.event.addDomListener(window,"load",function(){function t(a){var t=a.getPosition(),s="",o="",i="";null!=a.address&&""!=a.address&&(s='<div class="'+e.classdir+'">'+a.address+"</div>"),null!=a.mail&&""!=a.mail&&(o='<div class="'+e.classmail+'">'+a.mail+"</div>"),""!=a.phone&&null!=a.phone&&(i='<div class="'+e.classphone+'">'+a.phone+"</div>"),null!=a.thumb&&""!=a.thumb&&(logo='<img src="'+a.thumb+'"  class="infoImg" />'),r.setContent('<div id="infoWindow">'+logo+' <div class="'+e.classinfo+'"><h3 class="'+e.classtit+'"> '+a.title+"</h3>"+s+o+i+'<div class="vergmaps_container"><small><a class="txtvergmap" href=" https://maps.google.com.mx/maps?q='+t.lat()+","+t.lng()+'&hl=es&z=15" target="_new">'+e.txtver+"</a></small></div></div></div>"),r.open(l,a)}if(e.difstl)var n=new google.maps.StyledMapType(i,{name:"Styled Map"});var l=new google.maps.Map(e.mapa,{zoom:e.z,scrollwheel:!1,center:new google.maps.LatLng(20.671978,-103.308563),mapTypeIds:e.difstl?"":google.maps.MapTypeId.ROADMAP,mapTypeControlOptions:e.difstl?{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"map_style"]}:""});e.difstl&&(l.mapTypes.set("map_style",n),l.setMapTypeId("map_style"));var r=new google.maps.InfoWindow,m=function(){var e=this;s=this,t(e),l.setCenter(e.getPosition())},p=function(e){var a=o[e];s=o[e],l.setCenter(a.getPosition())};google.maps.event.addListener(l,"click",function(){r.close()});for(var g=[],d=[],c=0;c<e.locations.length;c++)d[c]=e.locations[c],g[c]=new google.maps.Marker({map:l,id:d[c].id,title:d[c].name,address:d[c].address,mail:d[c].mail,phone:d[c].phone,thumb:d[c].thumb,icon:e.icongm,animation:google.maps.Animation.DROP,position:new google.maps.LatLng(d[c].location[0],d[c].location[1]),clickable:!0,draggable:!1,flat:!0}),google.maps.event.addListener(g[c],"click",m),o.push(g[c]);google.maps.event.addListenerOnce(l,"idle",function(){o.length>0&&(e.showOnLoad?a(0):p(0))}),google.maps.event.addListener(l,"resize",function(){a(s,!0)}),google.maps.event.addDomListener(window,"resize",function(){google.maps.event.trigger(l,"resize")})}),$(e.vm).each(function(){$(this).on("click",function(e){e.preventDefault(),id=$(this).attr("data-map"),mk=t(id),a(mk)})}),$(e.vmcombo).on("change",function(){var s=$(e.vmcombo+" option:selected").attr("value"),o=t(s);a(o)})};